From 16dccb51dec1c08fcf5dfcf5ca6778bb387f6b32 Mon Sep 17 00:00:00 2001
From: Josua Mayer <josua@solid-run.com>
Date: Tue, 26 Nov 2024 11:11:57 +0100
Subject: [PATCH] lx2160acex6: add configuration for each ddr speed

Signed-off-by: Josua Mayer <josua@solid-run.com>
---
 GenerateSRConfigs.sh                          |  6 +++++
 lx2160acex6_evb.tmpl                          | 24 +++++++++++++++++++
 .../evb/rcw_2000_700_2400_3_3_2_auto.rcw      | 24 +++++++++++++++++++
 .../evb/rcw_2000_700_2600_3_3_2_auto.rcw      | 24 +++++++++++++++++++
 .../evb/rcw_2000_700_2900_3_3_2_auto.rcw      |  2 ++
 .../evb/rcw_2000_700_3200_3_3_2_auto.rcw      | 24 +++++++++++++++++++
 .../evb/rcw_2200_750_2400_3_3_2_auto.rcw      | 24 +++++++++++++++++++
 .../evb/rcw_2200_750_2600_3_3_2_auto.rcw      | 24 +++++++++++++++++++
 .../evb/rcw_2200_750_2900_3_3_2_auto.rcw      | 24 +++++++++++++++++++
 .../evb/rcw_2200_750_3200_3_3_2_auto.rcw      |  2 ++
 10 files changed, 178 insertions(+)
 create mode 100644 lx2160acex6_evb.tmpl
 create mode 100644 lx2160acex6_rev2/evb/rcw_2000_700_2400_3_3_2_auto.rcw
 create mode 100644 lx2160acex6_rev2/evb/rcw_2000_700_2600_3_3_2_auto.rcw
 create mode 100644 lx2160acex6_rev2/evb/rcw_2000_700_3200_3_3_2_auto.rcw
 create mode 100644 lx2160acex6_rev2/evb/rcw_2200_750_2400_3_3_2_auto.rcw
 create mode 100644 lx2160acex6_rev2/evb/rcw_2200_750_2600_3_3_2_auto.rcw
 create mode 100644 lx2160acex6_rev2/evb/rcw_2200_750_2900_3_3_2_auto.rcw

diff --git a/GenerateSRConfigs.sh b/GenerateSRConfigs.sh
index 1c98023..e55667a 100755
--- a/GenerateSRConfigs.sh
+++ b/GenerateSRConfigs.sh
@@ -45,3 +45,9 @@ for DDR_SPEED in 2400 2600 2900 3200; do
 		done
 	done
 done
+
+# generate LX2160A CEX-6 Internal Evaluation Board
+for DDR_SPEED in 2400 2600 2900 3200; do
+	generate lx2160acex6_evb.tmpl lx2160acex6 2 evb 2000 700 ${DDR_SPEED} 3 3 2 auto
+	generate lx2160acex6_evb.tmpl lx2160acex6 2 evb 2200 750 ${DDR_SPEED} 3 3 2 auto
+done
diff --git a/lx2160acex6_evb.tmpl b/lx2160acex6_evb.tmpl
new file mode 100644
index 0000000..79fbe85
--- /dev/null
+++ b/lx2160acex6_evb.tmpl
@@ -0,0 +1,24 @@
+/*
+ * SerDes Protocol 1 -  %SD1%
+ * SerDes Protocol 2 -  %SD2%
+ * SerDes Protocol 3 -  %SD3%
+ *
+ * Frequencies:
+ * Core     -- %CPU_SPEED% MHz
+ * Platform -- %BUS_SPEED%  MHz
+ * DDR      -- %DDR_SPEED% MT/s
+ *
+ * Silicon %SOC_REVISION%.0
+ * Boot from %BOOTSOURCE%
+ */
+
+#define LX_SR %SOC_REVISION%
+#define LX_BOOTSOURCE_%BOOTSOURCE%
+#include <../lx2160asi/lx2160a.rcwi>
+#include <../lx2160acex7/include/pll_%CPU_SPEED%_%BUS_SPEED%_xxxx.rcwi>
+#include <../lx2160acex7/include/pll_xxxx_xxx_%DDR_SPEED%.rcwi>
+#include <../%module%_rev%SOC_REVISION%/include/common.rcwi>
+#include <../lx2160acex7/include/SD1_%SD1%.rcwi>
+#include <../lx2160acex7/include/SD2_%SD2%.rcwi>
+#include <../lx2160acex7/include/SD3_%SD3%.rcwi>
+#include <../%module%_rev%SOC_REVISION%/include/common_pbi.rcwi>
diff --git a/lx2160acex6_rev2/evb/rcw_2000_700_2400_3_3_2_auto.rcw b/lx2160acex6_rev2/evb/rcw_2000_700_2400_3_3_2_auto.rcw
new file mode 100644
index 0000000..3ba20f4
--- /dev/null
+++ b/lx2160acex6_rev2/evb/rcw_2000_700_2400_3_3_2_auto.rcw
@@ -0,0 +1,24 @@
+/*
+ * SerDes Protocol 1 -  3
+ * SerDes Protocol 2 -  3
+ * SerDes Protocol 3 -  2
+ *
+ * Frequencies:
+ * Core     -- 2000 MHz
+ * Platform -- 700  MHz
+ * DDR      -- 2400 MT/s
+ *
+ * Silicon 2.0
+ * Boot from AUTO
+ */
+
+#define LX_SR 2
+#define LX_BOOTSOURCE_AUTO
+#include <../lx2160asi/lx2160a.rcwi>
+#include <../lx2160acex7/include/pll_2000_700_xxxx.rcwi>
+#include <../lx2160acex7/include/pll_xxxx_xxx_2400.rcwi>
+#include <../lx2160acex6_rev2/include/common.rcwi>
+#include <../lx2160acex7/include/SD1_3.rcwi>
+#include <../lx2160acex7/include/SD2_3.rcwi>
+#include <../lx2160acex7/include/SD3_2.rcwi>
+#include <../lx2160acex6_rev2/include/common_pbi.rcwi>
diff --git a/lx2160acex6_rev2/evb/rcw_2000_700_2600_3_3_2_auto.rcw b/lx2160acex6_rev2/evb/rcw_2000_700_2600_3_3_2_auto.rcw
new file mode 100644
index 0000000..780ac70
--- /dev/null
+++ b/lx2160acex6_rev2/evb/rcw_2000_700_2600_3_3_2_auto.rcw
@@ -0,0 +1,24 @@
+/*
+ * SerDes Protocol 1 -  3
+ * SerDes Protocol 2 -  3
+ * SerDes Protocol 3 -  2
+ *
+ * Frequencies:
+ * Core     -- 2000 MHz
+ * Platform -- 700  MHz
+ * DDR      -- 2600 MT/s
+ *
+ * Silicon 2.0
+ * Boot from AUTO
+ */
+
+#define LX_SR 2
+#define LX_BOOTSOURCE_AUTO
+#include <../lx2160asi/lx2160a.rcwi>
+#include <../lx2160acex7/include/pll_2000_700_xxxx.rcwi>
+#include <../lx2160acex7/include/pll_xxxx_xxx_2600.rcwi>
+#include <../lx2160acex6_rev2/include/common.rcwi>
+#include <../lx2160acex7/include/SD1_3.rcwi>
+#include <../lx2160acex7/include/SD2_3.rcwi>
+#include <../lx2160acex7/include/SD3_2.rcwi>
+#include <../lx2160acex6_rev2/include/common_pbi.rcwi>
diff --git a/lx2160acex6_rev2/evb/rcw_2000_700_2900_3_3_2_auto.rcw b/lx2160acex6_rev2/evb/rcw_2000_700_2900_3_3_2_auto.rcw
index 6ae1090..6d54680 100644
--- a/lx2160acex6_rev2/evb/rcw_2000_700_2900_3_3_2_auto.rcw
+++ b/lx2160acex6_rev2/evb/rcw_2000_700_2900_3_3_2_auto.rcw
@@ -9,9 +9,11 @@
  * DDR      -- 2900 MT/s
  *
  * Silicon 2.0
+ * Boot from AUTO
  */
 
 #define LX_SR 2
+#define LX_BOOTSOURCE_AUTO
 #include <../lx2160asi/lx2160a.rcwi>
 #include <../lx2160acex7/include/pll_2000_700_xxxx.rcwi>
 #include <../lx2160acex7/include/pll_xxxx_xxx_2900.rcwi>
diff --git a/lx2160acex6_rev2/evb/rcw_2000_700_3200_3_3_2_auto.rcw b/lx2160acex6_rev2/evb/rcw_2000_700_3200_3_3_2_auto.rcw
new file mode 100644
index 0000000..97c7ba3
--- /dev/null
+++ b/lx2160acex6_rev2/evb/rcw_2000_700_3200_3_3_2_auto.rcw
@@ -0,0 +1,24 @@
+/*
+ * SerDes Protocol 1 -  3
+ * SerDes Protocol 2 -  3
+ * SerDes Protocol 3 -  2
+ *
+ * Frequencies:
+ * Core     -- 2000 MHz
+ * Platform -- 700  MHz
+ * DDR      -- 3200 MT/s
+ *
+ * Silicon 2.0
+ * Boot from AUTO
+ */
+
+#define LX_SR 2
+#define LX_BOOTSOURCE_AUTO
+#include <../lx2160asi/lx2160a.rcwi>
+#include <../lx2160acex7/include/pll_2000_700_xxxx.rcwi>
+#include <../lx2160acex7/include/pll_xxxx_xxx_3200.rcwi>
+#include <../lx2160acex6_rev2/include/common.rcwi>
+#include <../lx2160acex7/include/SD1_3.rcwi>
+#include <../lx2160acex7/include/SD2_3.rcwi>
+#include <../lx2160acex7/include/SD3_2.rcwi>
+#include <../lx2160acex6_rev2/include/common_pbi.rcwi>
diff --git a/lx2160acex6_rev2/evb/rcw_2200_750_2400_3_3_2_auto.rcw b/lx2160acex6_rev2/evb/rcw_2200_750_2400_3_3_2_auto.rcw
new file mode 100644
index 0000000..fbb8156
--- /dev/null
+++ b/lx2160acex6_rev2/evb/rcw_2200_750_2400_3_3_2_auto.rcw
@@ -0,0 +1,24 @@
+/*
+ * SerDes Protocol 1 -  3
+ * SerDes Protocol 2 -  3
+ * SerDes Protocol 3 -  2
+ *
+ * Frequencies:
+ * Core     -- 2200 MHz
+ * Platform -- 750  MHz
+ * DDR      -- 2400 MT/s
+ *
+ * Silicon 2.0
+ * Boot from AUTO
+ */
+
+#define LX_SR 2
+#define LX_BOOTSOURCE_AUTO
+#include <../lx2160asi/lx2160a.rcwi>
+#include <../lx2160acex7/include/pll_2200_750_xxxx.rcwi>
+#include <../lx2160acex7/include/pll_xxxx_xxx_2400.rcwi>
+#include <../lx2160acex6_rev2/include/common.rcwi>
+#include <../lx2160acex7/include/SD1_3.rcwi>
+#include <../lx2160acex7/include/SD2_3.rcwi>
+#include <../lx2160acex7/include/SD3_2.rcwi>
+#include <../lx2160acex6_rev2/include/common_pbi.rcwi>
diff --git a/lx2160acex6_rev2/evb/rcw_2200_750_2600_3_3_2_auto.rcw b/lx2160acex6_rev2/evb/rcw_2200_750_2600_3_3_2_auto.rcw
new file mode 100644
index 0000000..68bd37f
--- /dev/null
+++ b/lx2160acex6_rev2/evb/rcw_2200_750_2600_3_3_2_auto.rcw
@@ -0,0 +1,24 @@
+/*
+ * SerDes Protocol 1 -  3
+ * SerDes Protocol 2 -  3
+ * SerDes Protocol 3 -  2
+ *
+ * Frequencies:
+ * Core     -- 2200 MHz
+ * Platform -- 750  MHz
+ * DDR      -- 2600 MT/s
+ *
+ * Silicon 2.0
+ * Boot from AUTO
+ */
+
+#define LX_SR 2
+#define LX_BOOTSOURCE_AUTO
+#include <../lx2160asi/lx2160a.rcwi>
+#include <../lx2160acex7/include/pll_2200_750_xxxx.rcwi>
+#include <../lx2160acex7/include/pll_xxxx_xxx_2600.rcwi>
+#include <../lx2160acex6_rev2/include/common.rcwi>
+#include <../lx2160acex7/include/SD1_3.rcwi>
+#include <../lx2160acex7/include/SD2_3.rcwi>
+#include <../lx2160acex7/include/SD3_2.rcwi>
+#include <../lx2160acex6_rev2/include/common_pbi.rcwi>
diff --git a/lx2160acex6_rev2/evb/rcw_2200_750_2900_3_3_2_auto.rcw b/lx2160acex6_rev2/evb/rcw_2200_750_2900_3_3_2_auto.rcw
new file mode 100644
index 0000000..a38c602
--- /dev/null
+++ b/lx2160acex6_rev2/evb/rcw_2200_750_2900_3_3_2_auto.rcw
@@ -0,0 +1,24 @@
+/*
+ * SerDes Protocol 1 -  3
+ * SerDes Protocol 2 -  3
+ * SerDes Protocol 3 -  2
+ *
+ * Frequencies:
+ * Core     -- 2200 MHz
+ * Platform -- 750  MHz
+ * DDR      -- 2900 MT/s
+ *
+ * Silicon 2.0
+ * Boot from AUTO
+ */
+
+#define LX_SR 2
+#define LX_BOOTSOURCE_AUTO
+#include <../lx2160asi/lx2160a.rcwi>
+#include <../lx2160acex7/include/pll_2200_750_xxxx.rcwi>
+#include <../lx2160acex7/include/pll_xxxx_xxx_2900.rcwi>
+#include <../lx2160acex6_rev2/include/common.rcwi>
+#include <../lx2160acex7/include/SD1_3.rcwi>
+#include <../lx2160acex7/include/SD2_3.rcwi>
+#include <../lx2160acex7/include/SD3_2.rcwi>
+#include <../lx2160acex6_rev2/include/common_pbi.rcwi>
diff --git a/lx2160acex6_rev2/evb/rcw_2200_750_3200_3_3_2_auto.rcw b/lx2160acex6_rev2/evb/rcw_2200_750_3200_3_3_2_auto.rcw
index a66d4ec..7839e7c 100644
--- a/lx2160acex6_rev2/evb/rcw_2200_750_3200_3_3_2_auto.rcw
+++ b/lx2160acex6_rev2/evb/rcw_2200_750_3200_3_3_2_auto.rcw
@@ -9,9 +9,11 @@
  * DDR      -- 3200 MT/s
  *
  * Silicon 2.0
+ * Boot from AUTO
  */
 
 #define LX_SR 2
+#define LX_BOOTSOURCE_AUTO
 #include <../lx2160asi/lx2160a.rcwi>
 #include <../lx2160acex7/include/pll_2200_750_xxxx.rcwi>
 #include <../lx2160acex7/include/pll_xxxx_xxx_3200.rcwi>
-- 
2.43.0

