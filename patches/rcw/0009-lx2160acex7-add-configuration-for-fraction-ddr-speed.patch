From 51af4e2a98e234e27a0127b2455b6049ce8097e2 Mon Sep 17 00:00:00 2001
From: Josua Mayer <josua@solid-run.com>
Date: Tue, 8 Oct 2024 12:44:10 +0200
Subject: [PATCH] lx2160acex7: add configuration for fraction ddr speed 2666

Signed-off-by: Josua Mayer <josua@solid-run.com>
---
 .../rcw_2000_700_2666_8_5_2_auto.rcw          | 23 +++++++++++++++++
 .../rcw_2000_700_2666_8_5_2_sdhc.rcw          | 25 +++++++++++++++++++
 .../rcw_2000_700_2666_8_5_2_xspi.rcw          | 25 +++++++++++++++++++
 .../rcw_2200_750_2666_8_5_2_auto.rcw          | 23 +++++++++++++++++
 .../rcw_2200_750_2666_8_5_2_sdhc.rcw          | 25 +++++++++++++++++++
 .../rcw_2200_750_2666_8_5_2_xspi.rcw          | 25 +++++++++++++++++++
 lx2160acex7/include/pll_xxxx_xxx_2666.rcwi    | 12 +++++++++
 .../rcw_2000_700_2666_8_5_2_auto.rcw          | 23 +++++++++++++++++
 .../rcw_2000_700_2666_8_5_2_sdhc.rcw          | 25 +++++++++++++++++++
 .../rcw_2000_700_2666_8_5_2_xspi.rcw          | 25 +++++++++++++++++++
 .../rcw_2200_750_2666_8_5_2_auto.rcw          | 23 +++++++++++++++++
 .../rcw_2200_750_2666_8_5_2_sdhc.rcw          | 25 +++++++++++++++++++
 .../rcw_2200_750_2666_8_5_2_xspi.rcw          | 25 +++++++++++++++++++
 13 files changed, 304 insertions(+)
 create mode 100644 lx2160acex7/clearfog-cx/rcw_2000_700_2666_8_5_2_auto.rcw
 create mode 100644 lx2160acex7/clearfog-cx/rcw_2000_700_2666_8_5_2_sdhc.rcw
 create mode 100644 lx2160acex7/clearfog-cx/rcw_2000_700_2666_8_5_2_xspi.rcw
 create mode 100644 lx2160acex7/clearfog-cx/rcw_2200_750_2666_8_5_2_auto.rcw
 create mode 100644 lx2160acex7/clearfog-cx/rcw_2200_750_2666_8_5_2_sdhc.rcw
 create mode 100644 lx2160acex7/clearfog-cx/rcw_2200_750_2666_8_5_2_xspi.rcw
 create mode 100644 lx2160acex7/include/pll_xxxx_xxx_2666.rcwi
 create mode 100644 lx2160acex7_rev2/clearfog-cx/rcw_2000_700_2666_8_5_2_auto.rcw
 create mode 100644 lx2160acex7_rev2/clearfog-cx/rcw_2000_700_2666_8_5_2_sdhc.rcw
 create mode 100644 lx2160acex7_rev2/clearfog-cx/rcw_2000_700_2666_8_5_2_xspi.rcw
 create mode 100644 lx2160acex7_rev2/clearfog-cx/rcw_2200_750_2666_8_5_2_auto.rcw
 create mode 100644 lx2160acex7_rev2/clearfog-cx/rcw_2200_750_2666_8_5_2_sdhc.rcw
 create mode 100644 lx2160acex7_rev2/clearfog-cx/rcw_2200_750_2666_8_5_2_xspi.rcw

diff --git a/lx2160acex7/clearfog-cx/rcw_2000_700_2666_8_5_2_auto.rcw b/lx2160acex7/clearfog-cx/rcw_2000_700_2666_8_5_2_auto.rcw
new file mode 100644
index 0000000..8178257
--- /dev/null
+++ b/lx2160acex7/clearfog-cx/rcw_2000_700_2666_8_5_2_auto.rcw
@@ -0,0 +1,23 @@
+/*
+ * SerDes Protocol 1 -  8
+ * SerDes Protocol 2 -  5
+ * SerDes Protocol 3 -  2
+ *
+ * Frequencies:
+ * Core     -- 2000 MHz
+ * Platform -- 700  MHz
+ * DDR      -- 2666 MT/s
+ *
+ * Silicon 1.0
+ */
+
+#define LX_SR 1
+#include <../lx2160asi/lx2160a.rcwi>
+#include <../lx2160acex7/include/pll_2000_700_xxxx.rcwi>
+#include <../lx2160acex7/include/pll_xxxx_xxx_2666.rcwi>
+#include <../lx2160acex7/include/common.rcwi>
+#include <../lx2160acex7/include/SD1_8.rcwi>
+#include <../lx2160acex7/include/SD2_5.rcwi>
+#include <../lx2160acex7/include/SD3_2.rcwi>
+#include <../lx2160acex7/include/common_pbi.rcwi>
+#include <../lx2160acex7/clearfog-cx/sd1_8_eq.rcwi>
diff --git a/lx2160acex7/clearfog-cx/rcw_2000_700_2666_8_5_2_sdhc.rcw b/lx2160acex7/clearfog-cx/rcw_2000_700_2666_8_5_2_sdhc.rcw
new file mode 100644
index 0000000..6f362cf
--- /dev/null
+++ b/lx2160acex7/clearfog-cx/rcw_2000_700_2666_8_5_2_sdhc.rcw
@@ -0,0 +1,25 @@
+/*
+ * SerDes Protocol 1 -  8
+ * SerDes Protocol 2 -  5
+ * SerDes Protocol 3 -  2
+ *
+ * Frequencies:
+ * Core     -- 2000 MHz
+ * Platform -- 700  MHz
+ * DDR      -- 2666 MT/s
+ *
+ * Silicon 1.0
+ * Boot from SDHC1
+ */
+
+#define LX_SR 1
+#define LX_BOOTSOURCE_SDHC
+#include <../lx2160asi/lx2160a.rcwi>
+#include <../lx2160acex7/include/pll_2000_700_xxxx.rcwi>
+#include <../lx2160acex7/include/pll_xxxx_xxx_2666.rcwi>
+#include <../lx2160acex7/include/common.rcwi>
+#include <../lx2160acex7/include/SD1_8.rcwi>
+#include <../lx2160acex7/include/SD2_5.rcwi>
+#include <../lx2160acex7/include/SD3_2.rcwi>
+#include <../lx2160acex7/include/common_pbi.rcwi>
+#include <../lx2160acex7/clearfog-cx/sd1_8_eq.rcwi>
diff --git a/lx2160acex7/clearfog-cx/rcw_2000_700_2666_8_5_2_xspi.rcw b/lx2160acex7/clearfog-cx/rcw_2000_700_2666_8_5_2_xspi.rcw
new file mode 100644
index 0000000..cb6614a
--- /dev/null
+++ b/lx2160acex7/clearfog-cx/rcw_2000_700_2666_8_5_2_xspi.rcw
@@ -0,0 +1,25 @@
+/*
+ * SerDes Protocol 1 -  8
+ * SerDes Protocol 2 -  5
+ * SerDes Protocol 3 -  2
+ *
+ * Frequencies:
+ * Core     -- 2000 MHz
+ * Platform -- 700  MHz
+ * DDR      -- 2666 MT/s
+ *
+ * Silicon 1.0
+ * Boot from XSPI
+ */
+
+#define LX_SR 1
+#define LX_BOOTSOURCE_XSPI
+#include <../lx2160asi/lx2160a.rcwi>
+#include <../lx2160acex7/include/pll_2000_700_xxxx.rcwi>
+#include <../lx2160acex7/include/pll_xxxx_xxx_2666.rcwi>
+#include <../lx2160acex7/include/common.rcwi>
+#include <../lx2160acex7/include/SD1_8.rcwi>
+#include <../lx2160acex7/include/SD2_5.rcwi>
+#include <../lx2160acex7/include/SD3_2.rcwi>
+#include <../lx2160acex7/include/common_pbi.rcwi>
+#include <../lx2160acex7/clearfog-cx/sd1_8_eq.rcwi>
diff --git a/lx2160acex7/clearfog-cx/rcw_2200_750_2666_8_5_2_auto.rcw b/lx2160acex7/clearfog-cx/rcw_2200_750_2666_8_5_2_auto.rcw
new file mode 100644
index 0000000..6822342
--- /dev/null
+++ b/lx2160acex7/clearfog-cx/rcw_2200_750_2666_8_5_2_auto.rcw
@@ -0,0 +1,23 @@
+/*
+ * SerDes Protocol 1 -  8
+ * SerDes Protocol 2 -  5
+ * SerDes Protocol 3 -  2
+ *
+ * Frequencies:
+ * Core     -- 2200 MHz
+ * Platform -- 700  MHz
+ * DDR      -- 2666 MT/s
+ *
+ * Silicon 1.0
+ */
+
+#define LX_SR 1
+#include <../lx2160asi/lx2160a.rcwi>
+#include <../lx2160acex7/include/pll_2200_750_xxxx.rcwi>
+#include <../lx2160acex7/include/pll_xxxx_xxx_2666.rcwi>
+#include <../lx2160acex7/include/common.rcwi>
+#include <../lx2160acex7/include/SD1_8.rcwi>
+#include <../lx2160acex7/include/SD2_5.rcwi>
+#include <../lx2160acex7/include/SD3_2.rcwi>
+#include <../lx2160acex7/include/common_pbi.rcwi>
+#include <../lx2160acex7/clearfog-cx/sd1_8_eq.rcwi>
diff --git a/lx2160acex7/clearfog-cx/rcw_2200_750_2666_8_5_2_sdhc.rcw b/lx2160acex7/clearfog-cx/rcw_2200_750_2666_8_5_2_sdhc.rcw
new file mode 100644
index 0000000..f111731
--- /dev/null
+++ b/lx2160acex7/clearfog-cx/rcw_2200_750_2666_8_5_2_sdhc.rcw
@@ -0,0 +1,25 @@
+/*
+ * SerDes Protocol 1 -  8
+ * SerDes Protocol 2 -  5
+ * SerDes Protocol 3 -  2
+ *
+ * Frequencies:
+ * Core     -- 2200 MHz
+ * Platform -- 700  MHz
+ * DDR      -- 2666 MT/s
+ *
+ * Silicon 1.0
+ * Boot from SDHC1
+ */
+
+#define LX_SR 1
+#define LX_BOOTSOURCE_SDHC
+#include <../lx2160asi/lx2160a.rcwi>
+#include <../lx2160acex7/include/pll_2200_750_xxxx.rcwi>
+#include <../lx2160acex7/include/pll_xxxx_xxx_2666.rcwi>
+#include <../lx2160acex7/include/common.rcwi>
+#include <../lx2160acex7/include/SD1_8.rcwi>
+#include <../lx2160acex7/include/SD2_5.rcwi>
+#include <../lx2160acex7/include/SD3_2.rcwi>
+#include <../lx2160acex7/include/common_pbi.rcwi>
+#include <../lx2160acex7/clearfog-cx/sd1_8_eq.rcwi>
diff --git a/lx2160acex7/clearfog-cx/rcw_2200_750_2666_8_5_2_xspi.rcw b/lx2160acex7/clearfog-cx/rcw_2200_750_2666_8_5_2_xspi.rcw
new file mode 100644
index 0000000..112f017
--- /dev/null
+++ b/lx2160acex7/clearfog-cx/rcw_2200_750_2666_8_5_2_xspi.rcw
@@ -0,0 +1,25 @@
+/*
+ * SerDes Protocol 1 -  8
+ * SerDes Protocol 2 -  5
+ * SerDes Protocol 3 -  2
+ *
+ * Frequencies:
+ * Core     -- 2200 MHz
+ * Platform -- 700  MHz
+ * DDR      -- 2666 MT/s
+ *
+ * Silicon 1.0
+ * Boot from XSPI
+ */
+
+#define LX_SR 1
+#define LX_BOOTSOURCE_XSPI
+#include <../lx2160asi/lx2160a.rcwi>
+#include <../lx2160acex7/include/pll_2200_750_xxxx.rcwi>
+#include <../lx2160acex7/include/pll_xxxx_xxx_2666.rcwi>
+#include <../lx2160acex7/include/common.rcwi>
+#include <../lx2160acex7/include/SD1_8.rcwi>
+#include <../lx2160acex7/include/SD2_5.rcwi>
+#include <../lx2160acex7/include/SD3_2.rcwi>
+#include <../lx2160acex7/include/common_pbi.rcwi>
+#include <../lx2160acex7/clearfog-cx/sd1_8_eq.rcwi>
diff --git a/lx2160acex7/include/pll_xxxx_xxx_2666.rcwi b/lx2160acex7/include/pll_xxxx_xxx_2666.rcwi
new file mode 100644
index 0000000..06d3da1
--- /dev/null
+++ b/lx2160acex7/include/pll_xxxx_xxx_2666.rcwi
@@ -0,0 +1,12 @@
+/*
+ * DDR Rate: 2666MHz
+ *
+ * DDR PHY Clock (half ddr clock, quarter mts rate)
+ * multiplier = 20 (20)
+ * divider = 3 (2)
+ * 100MHz x 20 / 3 = 666MHz (MTS = 4 x 666 = 2666MHz)
+ */
+MEM_PLL_RAT=20
+MEM_PLL_CFG=2
+MEM2_PLL_RAT=20
+MEM2_PLL_CFG=2
diff --git a/lx2160acex7_rev2/clearfog-cx/rcw_2000_700_2666_8_5_2_auto.rcw b/lx2160acex7_rev2/clearfog-cx/rcw_2000_700_2666_8_5_2_auto.rcw
new file mode 100644
index 0000000..73efdfa
--- /dev/null
+++ b/lx2160acex7_rev2/clearfog-cx/rcw_2000_700_2666_8_5_2_auto.rcw
@@ -0,0 +1,23 @@
+/*
+ * SerDes Protocol 1 -  8
+ * SerDes Protocol 2 -  5
+ * SerDes Protocol 3 -  2
+ *
+ * Frequencies:
+ * Core     -- 2000 MHz
+ * Platform -- 700  MHz
+ * DDR      -- 2666 MT/s
+ *
+ * Silicon 2.0
+ */
+
+#define LX_SR 2
+#include <../lx2160asi/lx2160a.rcwi>
+#include <../lx2160acex7/include/pll_2000_700_xxxx.rcwi>
+#include <../lx2160acex7/include/pll_xxxx_xxx_2666.rcwi>
+#include <../lx2160acex7/include/common.rcwi>
+#include <../lx2160acex7/include/SD1_8.rcwi>
+#include <../lx2160acex7/include/SD2_5.rcwi>
+#include <../lx2160acex7/include/SD3_2.rcwi>
+#include <../lx2160acex7/include/common_pbi.rcwi>
+#include <../lx2160acex7/clearfog-cx/sd1_8_eq.rcwi>
diff --git a/lx2160acex7_rev2/clearfog-cx/rcw_2000_700_2666_8_5_2_sdhc.rcw b/lx2160acex7_rev2/clearfog-cx/rcw_2000_700_2666_8_5_2_sdhc.rcw
new file mode 100644
index 0000000..5ac0305
--- /dev/null
+++ b/lx2160acex7_rev2/clearfog-cx/rcw_2000_700_2666_8_5_2_sdhc.rcw
@@ -0,0 +1,25 @@
+/*
+ * SerDes Protocol 1 -  8
+ * SerDes Protocol 2 -  5
+ * SerDes Protocol 3 -  2
+ *
+ * Frequencies:
+ * Core     -- 2000 MHz
+ * Platform -- 700  MHz
+ * DDR      -- 2666 MT/s
+ *
+ * Silicon 2.0
+ * Boot from SDHC1
+ */
+
+#define LX_SR 2
+#define LX_BOOTSOURCE_SDHC
+#include <../lx2160asi/lx2160a.rcwi>
+#include <../lx2160acex7/include/pll_2000_700_xxxx.rcwi>
+#include <../lx2160acex7/include/pll_xxxx_xxx_2666.rcwi>
+#include <../lx2160acex7/include/common.rcwi>
+#include <../lx2160acex7/include/SD1_8.rcwi>
+#include <../lx2160acex7/include/SD2_5.rcwi>
+#include <../lx2160acex7/include/SD3_2.rcwi>
+#include <../lx2160acex7/include/common_pbi.rcwi>
+#include <../lx2160acex7/clearfog-cx/sd1_8_eq.rcwi>
diff --git a/lx2160acex7_rev2/clearfog-cx/rcw_2000_700_2666_8_5_2_xspi.rcw b/lx2160acex7_rev2/clearfog-cx/rcw_2000_700_2666_8_5_2_xspi.rcw
new file mode 100644
index 0000000..ffc7388
--- /dev/null
+++ b/lx2160acex7_rev2/clearfog-cx/rcw_2000_700_2666_8_5_2_xspi.rcw
@@ -0,0 +1,25 @@
+/*
+ * SerDes Protocol 1 -  8
+ * SerDes Protocol 2 -  5
+ * SerDes Protocol 3 -  2
+ *
+ * Frequencies:
+ * Core     -- 2000 MHz
+ * Platform -- 700  MHz
+ * DDR      -- 2666 MT/s
+ *
+ * Silicon 2.0
+ * Boot from XSPI
+ */
+
+#define LX_SR 2
+#define LX_BOOTSOURCE_XSPI
+#include <../lx2160asi/lx2160a.rcwi>
+#include <../lx2160acex7/include/pll_2000_700_xxxx.rcwi>
+#include <../lx2160acex7/include/pll_xxxx_xxx_2666.rcwi>
+#include <../lx2160acex7/include/common.rcwi>
+#include <../lx2160acex7/include/SD1_8.rcwi>
+#include <../lx2160acex7/include/SD2_5.rcwi>
+#include <../lx2160acex7/include/SD3_2.rcwi>
+#include <../lx2160acex7/include/common_pbi.rcwi>
+#include <../lx2160acex7/clearfog-cx/sd1_8_eq.rcwi>
diff --git a/lx2160acex7_rev2/clearfog-cx/rcw_2200_750_2666_8_5_2_auto.rcw b/lx2160acex7_rev2/clearfog-cx/rcw_2200_750_2666_8_5_2_auto.rcw
new file mode 100644
index 0000000..0206680
--- /dev/null
+++ b/lx2160acex7_rev2/clearfog-cx/rcw_2200_750_2666_8_5_2_auto.rcw
@@ -0,0 +1,23 @@
+/*
+ * SerDes Protocol 1 -  8
+ * SerDes Protocol 2 -  5
+ * SerDes Protocol 3 -  2
+ *
+ * Frequencies:
+ * Core     -- 2200 MHz
+ * Platform -- 700  MHz
+ * DDR      -- 2666 MT/s
+ *
+ * Silicon 2.0
+ */
+
+#define LX_SR 2
+#include <../lx2160asi/lx2160a.rcwi>
+#include <../lx2160acex7/include/pll_2200_750_xxxx.rcwi>
+#include <../lx2160acex7/include/pll_xxxx_xxx_2666.rcwi>
+#include <../lx2160acex7/include/common.rcwi>
+#include <../lx2160acex7/include/SD1_8.rcwi>
+#include <../lx2160acex7/include/SD2_5.rcwi>
+#include <../lx2160acex7/include/SD3_2.rcwi>
+#include <../lx2160acex7/include/common_pbi.rcwi>
+#include <../lx2160acex7/clearfog-cx/sd1_8_eq.rcwi>
diff --git a/lx2160acex7_rev2/clearfog-cx/rcw_2200_750_2666_8_5_2_sdhc.rcw b/lx2160acex7_rev2/clearfog-cx/rcw_2200_750_2666_8_5_2_sdhc.rcw
new file mode 100644
index 0000000..0213f6c
--- /dev/null
+++ b/lx2160acex7_rev2/clearfog-cx/rcw_2200_750_2666_8_5_2_sdhc.rcw
@@ -0,0 +1,25 @@
+/*
+ * SerDes Protocol 1 -  8
+ * SerDes Protocol 2 -  5
+ * SerDes Protocol 3 -  2
+ *
+ * Frequencies:
+ * Core     -- 2200 MHz
+ * Platform -- 700  MHz
+ * DDR      -- 2666 MT/s
+ *
+ * Silicon 2.0
+ * Boot from SDHC1
+ */
+
+#define LX_SR 2
+#define LX_BOOTSOURCE_SDHC
+#include <../lx2160asi/lx2160a.rcwi>
+#include <../lx2160acex7/include/pll_2200_750_xxxx.rcwi>
+#include <../lx2160acex7/include/pll_xxxx_xxx_2666.rcwi>
+#include <../lx2160acex7/include/common.rcwi>
+#include <../lx2160acex7/include/SD1_8.rcwi>
+#include <../lx2160acex7/include/SD2_5.rcwi>
+#include <../lx2160acex7/include/SD3_2.rcwi>
+#include <../lx2160acex7/include/common_pbi.rcwi>
+#include <../lx2160acex7/clearfog-cx/sd1_8_eq.rcwi>
diff --git a/lx2160acex7_rev2/clearfog-cx/rcw_2200_750_2666_8_5_2_xspi.rcw b/lx2160acex7_rev2/clearfog-cx/rcw_2200_750_2666_8_5_2_xspi.rcw
new file mode 100644
index 0000000..d31d063
--- /dev/null
+++ b/lx2160acex7_rev2/clearfog-cx/rcw_2200_750_2666_8_5_2_xspi.rcw
@@ -0,0 +1,25 @@
+/*
+ * SerDes Protocol 1 -  8
+ * SerDes Protocol 2 -  5
+ * SerDes Protocol 3 -  2
+ *
+ * Frequencies:
+ * Core     -- 2200 MHz
+ * Platform -- 700  MHz
+ * DDR      -- 2666 MT/s
+ *
+ * Silicon 2.0
+ * Boot from XSPI
+ */
+
+#define LX_SR 2
+#define LX_BOOTSOURCE_XSPI
+#include <../lx2160asi/lx2160a.rcwi>
+#include <../lx2160acex7/include/pll_2200_750_xxxx.rcwi>
+#include <../lx2160acex7/include/pll_xxxx_xxx_2666.rcwi>
+#include <../lx2160acex7/include/common.rcwi>
+#include <../lx2160acex7/include/SD1_8.rcwi>
+#include <../lx2160acex7/include/SD2_5.rcwi>
+#include <../lx2160acex7/include/SD3_2.rcwi>
+#include <../lx2160acex7/include/common_pbi.rcwi>
+#include <../lx2160acex7/clearfog-cx/sd1_8_eq.rcwi>
-- 
2.43.0

