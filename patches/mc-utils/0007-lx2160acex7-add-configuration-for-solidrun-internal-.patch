From b4cdbd33d22ce8e56eb6dd02bcb9cda2334a8ab7 Mon Sep 17 00:00:00 2001
From: Josua Mayer <josua@solid-run.com>
Date: Sat, 9 Aug 2025 19:08:29 +0200
Subject: [PATCH] lx2160acex7: add configuration for solidrun internal twins
 board

Signed-off-by: Josua Mayer <josua@solid-run.com>
---
 .../LX2160A-CEX7/twins-s1_8-s2_9-dpc.dts      | 145 +++++++++
 .../LX2160A-CEX7/twins-s1_8-s2_9-dpl.dts      | 295 ++++++++++++++++++
 2 files changed, 440 insertions(+)
 create mode 100644 config/lx2160a/LX2160A-CEX7/twins-s1_8-s2_9-dpc.dts
 create mode 100644 config/lx2160a/LX2160A-CEX7/twins-s1_8-s2_9-dpl.dts

diff --git a/config/lx2160a/LX2160A-CEX7/twins-s1_8-s2_9-dpc.dts b/config/lx2160a/LX2160A-CEX7/twins-s1_8-s2_9-dpc.dts
new file mode 100644
index 0000000..fc0c73a
--- /dev/null
+++ b/config/lx2160a/LX2160A-CEX7/twins-s1_8-s2_9-dpc.dts
@@ -0,0 +1,145 @@
+/*
+ * Copyright 2018 NXP
+ * Copyright 2025 Josua Mayer <josua@solid-run.com>
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions are met:
+ *   * Redistributions of source code must retain the above copyright
+ *     notice, this list of conditions and the following disclaimer.
+ *   * Redistributions in binary form must reproduce the above copyright
+ *     notice, this list of conditions and the following disclaimer in the
+ *     documentation and/or other materials provided with the distribution.
+ *   * Neither the name of the above-listed copyright holders nor the
+ *     names of any contributors may be used to endorse or promote products
+ *     derived from this software without specific prior written permission.
+ *
+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+ * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+ * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDERS OR CONTRIBUTORS BE
+ * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
+ * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
+ * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
+ * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
+ * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
+ * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
+ * POSSIBILITY OF SUCH DAMAGE.
+ */
+
+/*
+ * This DPC configures SolidRun Twins with 8x10Gbps and 8x1Gbps SerDes ports.
+ */
+
+/dts-v1/;
+
+/ {
+	resources {
+		icid_pools {
+			icid_pool@1 {
+				num = <0x64>;
+				base_icid = <0x0>;
+			};
+		};
+	};
+
+	mc_general {
+		log {
+			mode = "LOG_MODE_ON";
+			level = "LOG_LEVEL_WARNING";
+		};
+
+		console {
+			mode = "CONSOLE_MODE_OFF";
+			uart_id = <0x4>;
+			level = "LOG_LEVEL_WARNING";
+		};
+	};
+
+	controllers {
+		qbman {
+			/* Transform this number of 8-WQ channels into four times
+			 * as many 2-WQ channels. This allows the creation of a
+			 * larger number of DPCONs.
+			 */
+			wq_ch_conversion = <64>;
+		};
+	};
+
+	board_info {
+		recycle_ports {
+			recycle@1 {
+				max_rate = "1G";
+			};
+
+			recycle@2 {
+				max_rate = "1G";
+			};
+		};
+
+		ports {
+			mac@3 {
+				link_type = "MAC_LINK_TYPE_PHY";
+			};
+
+			mac@4 {
+				link_type = "MAC_LINK_TYPE_PHY";
+			};
+
+			mac@5 {
+				link_type = "MAC_LINK_TYPE_PHY";
+			};
+
+			mac@6 {
+				link_type = "MAC_LINK_TYPE_PHY";
+			};
+
+			mac@7 {
+				link_type = "MAC_LINK_TYPE_PHY";
+			};
+
+			mac@8 {
+				link_type = "MAC_LINK_TYPE_PHY";
+			};
+
+			mac@9 {
+				link_type = "MAC_LINK_TYPE_PHY";
+			};
+
+			mac@10 {
+				link_type = "MAC_LINK_TYPE_PHY";
+			};
+
+			mac@11 {
+				link_type = "MAC_LINK_TYPE_PHY";
+			};
+
+			mac@12 {
+				link_type = "MAC_LINK_TYPE_PHY";
+			};
+
+			mac@13 {
+				link_type = "MAC_LINK_TYPE_PHY";
+			};
+
+			mac@14 {
+				link_type = "MAC_LINK_TYPE_PHY";
+			};
+
+			mac@15 {
+				link_type = "MAC_LINK_TYPE_PHY";
+			};
+
+			mac@16 {
+				link_type = "MAC_LINK_TYPE_PHY";
+			};
+
+			mac@17 {
+				link_type = "MAC_LINK_TYPE_PHY";
+			};
+
+			mac@18 {
+				link_type = "MAC_LINK_TYPE_PHY";
+			};
+		};
+	};
+};
diff --git a/config/lx2160a/LX2160A-CEX7/twins-s1_8-s2_9-dpl.dts b/config/lx2160a/LX2160A-CEX7/twins-s1_8-s2_9-dpl.dts
new file mode 100644
index 0000000..26385d9
--- /dev/null
+++ b/config/lx2160a/LX2160A-CEX7/twins-s1_8-s2_9-dpl.dts
@@ -0,0 +1,295 @@
+/*
+ * Copyright 2020 NXP
+ * Copyright 2025 Josua Mayer <josua@solid-run.com>
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions are met:
+ *   * Redistributions of source code must retain the above copyright
+ *     notice, this list of conditions and the following disclaimer.
+ *   * Redistributions in binary form must reproduce the above copyright
+ *     notice, this list of conditions and the following disclaimer in the
+ *     documentation and/or other materials provided with the distribution.
+ *   * Neither the name of the above-listed copyright holders nor the
+ *     names of any contributors may be used to endorse or promote products
+ *     derived from this software without specific prior written permission.
+ *
+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+ * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+ * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDERS OR CONTRIBUTORS BE
+ * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
+ * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
+ * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
+ * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
+ * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
+ * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
+ * POSSIBILITY OF SUCH DAMAGE.
+ */
+
+/dts-v1/;
+/ {
+	dpl-version = <10>;
+	/*****************************************************************
+	 * Containers
+	 *****************************************************************/
+	containers {
+
+		dprc@1 {
+			compatible = "fsl,dprc";
+			parent = "none";
+			options = "DPRC_CFG_OPT_SPAWN_ALLOWED", "DPRC_CFG_OPT_ALLOC_ALLOWED", "DPRC_CFG_OPT_OBJ_CREATE_ALLOWED", "DPRC_CFG_OPT_TOPOLOGY_CHANGES_ALLOWED", "DPRC_CFG_OPT_IRQ_CFG_ALLOWED";
+
+			objects {
+
+				/* -------------- DPMACs --------------*/
+				obj_set@dpmac {
+					type = "dpmac";
+					ids = <3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 >;
+				};
+
+				/* -------------- DPMCPs --------------*/
+				obj_set@dpmcp {
+					type = "dpmcp";
+					ids = <1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 >;
+				};
+
+				/* -------------- DPRTCs --------------*/
+				obj_set@dprtc {
+					type = "dprtc";
+					ids = <0 >;
+				};
+
+				/* -------------- DPSECIs --------------*/
+				obj_set@dpseci {
+					type = "dpseci";
+					ids = <0 >;
+				};
+			};
+		};
+	};
+
+	/*****************************************************************
+	 * Objects
+	 *****************************************************************/
+	objects {
+
+		dpmac@3 {
+			compatible = "fsl,dpmac";
+		};
+
+		dpmac@4 {
+			compatible = "fsl,dpmac";
+		};
+
+		dpmac@5 {
+			compatible = "fsl,dpmac";
+		};
+
+		dpmac@6 {
+			compatible = "fsl,dpmac";
+		};
+
+		dpmac@7 {
+			compatible = "fsl,dpmac";
+		};
+
+		dpmac@8 {
+			compatible = "fsl,dpmac";
+		};
+
+		dpmac@9 {
+			compatible = "fsl,dpmac";
+		};
+
+		dpmac@10 {
+			compatible = "fsl,dpmac";
+		};
+
+		dpmac@11 {
+			compatible = "fsl,dpmac";
+		};
+
+		dpmac@12 {
+			compatible = "fsl,dpmac";
+		};
+
+		dpmac@13 {
+			compatible = "fsl,dpmac";
+		};
+
+		dpmac@14 {
+			compatible = "fsl,dpmac";
+		};
+
+		dpmac@15 {
+			compatible = "fsl,dpmac";
+		};
+
+		dpmac@16 {
+			compatible = "fsl,dpmac";
+		};
+
+		dpmac@17 {
+			compatible = "fsl,dpmac";
+		};
+
+		dpmac@18 {
+			compatible = "fsl,dpmac";
+		};
+
+		dpmcp@1 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@2 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@3 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@4 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@5 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@6 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@7 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@8 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@9 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@10 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@11 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@12 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@13 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@14 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@15 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@16 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@17 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@18 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@19 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@20 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@21 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@22 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@23 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@24 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@25 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@26 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@27 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@28 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@29 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@30 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@31 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@32 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@33 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@34 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dpmcp@35 {
+			compatible = "fsl,dpmcp";
+		};
+
+		dprtc@0 {
+			compatible = "fsl,dprtc";
+		};
+
+		dpseci@0 {
+			compatible = "fsl,dpseci";
+			priorities = <1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1>;
+		};
+	};
+
+	/*****************************************************************
+	 * Connections
+	 *****************************************************************/
+	connections {
+	};
+};
-- 
2.43.0

